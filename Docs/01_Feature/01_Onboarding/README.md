# 온보딩 시스템 (Onboarding System)

## 개요
Knock 서비스의 첫 사용자 경험을 담당하는 시스템으로, **메인 화면에서 즉시 시작되는 인터랙티브 온보딩**을 제공합니다. 별도의 페이지 전환 없이 채팅 기반으로 자연스럽게 진행되며, 사용자 동의 획득부터 AI 생성 룸메이트와의 첫 만남까지 원활한 경험을 제공합니다.

## 핵심 가치
- **즉시성**: 앱 시작 즉시 메인 화면에서 온보딩 시작 (별도 페이지 없음)
- **인터랙티브**: 채팅 기반 대화형 온보딩으로 높은 몰입도
- **시각적 피드백**: 3초 페이드인 애니메이션으로 나의 방과 룸메이트 등장
- **투명한 동의**: 좌측 팝업을 통한 명확한 약관 동의 프로세스
- **AI 생성 룸메이트**: 사용자별 맞춤 AI 페르소나 자동 생성

## 새로운 온보딩 방식 (v2.0)

### ✨ 주요 변경사항
1. **별도 페이지 제거** → 메인 화면에서 즉시 진행
2. **3초 애니메이션** → 1F "내 방"이 서서히 밝아지며 룸메이트 등장
3. **채팅 기반 진행** → 우측 채팅창에서 대화형으로 진행
4. **좌측 팝업** → 빌딩 영역에 약관/정보 팝업 표시
5. **스킵 기능** → localStorage 기반 재방문 감지
6. **AI 생성** → 초기 룸메이트를 AI로 자동 생성

## 주요 기능

### 1. 메인 화면 즉시 진입
- 앱 시작 시 바로 메인 빌딩 뷰 표시
- 1F~5F 모두 블랙아웃 상태
- 우측 채팅창 비활성

### 2. 방 밝아지기 애니메이션 (3초)
- 1F "내 방" opacity 0 → 1
- 배경색 어두운 회색 → 파란색
- 룸메이트 아바타 페이드인
- 자동으로 1F 방 선택

### 3. 채팅 기반 온보딩 플로우

**Step 1: 첫 인사**
- 룸메이트: "안녕하세요! 처음 뵙네요. 저는 당신의 첫 룸메이트예요 🏠"
- 좌측 팝업: [서비스 소개]

**Step 2: 이름 입력**
- 룸메이트: "당신의 이름을 알려주시겠어요?"
- 사용자: 채팅으로 이름 입력

**Step 3: 나이 입력 (선택)**
- 룸메이트: "몇 살이신지 여쭤봐도 될까요?"
- 사용자: 나이 입력

**Step 4: 개인정보 동의**
- 룸메이트: "더 나은 대화를 위해 일부 정보를 사용해도 될까요?"
- 좌측 팝업: [개인정보 처리방침 + 체크박스]

**Step 5: 이용약관 동의**
- 룸메이트: "서비스 이용 전 마지막으로 약관을 확인해주세요."
- 좌측 팝업: [이용약관 + 동의 버튼]

**Step 6: 노크 가이드**
- 룸메이트: "지금 바로 노크해보세요! 🚪"
- 좌측 팝업: [노크 가이드]
- 온보딩 완료

### 4. 좌측 팝업 시스템
- 빌딩 영역에 오버레이 팝업
- 반투명 배경 + 픽셀 스타일 카드
- 단계별 다른 내용 표시:
  - 서비스 소개
  - 개인정보 처리방침 (스크롤 가능)
  - 이용약관 (스크롤 가능)
  - 노크 가이드

### 5. 스킵 기능
- localStorage에 'hasCompletedOnboarding' 저장
- 재방문 시 플래그 확인 후 온보딩 스킵
- 바로 정상 플레이 상태로 진입

### 6. AI 생성 룸메이트
- 초기 룸메이트를 AI로 자동 생성
- 사용자 입력 데이터 기반 페르소나 설정
- LLM을 통한 맞춤형 성격/관심사 구성

## 문서 구성

- [기능 명세서](./feature-spec.md) - 채팅 기반 온보딩 상세 명세
- [사용자 플로우](./user-flow.md) - 단계별 온보딩 여정
- [기술 스펙](./tech-spec.md) - 애니메이션, 상태 관리, localStorage 명세

## 의존성

### 선행 요구사항
- 없음 (서비스 진입점)

### 연관 시스템
- [룸메이트 시스템](../02_Roommate/README.md) - AI 페르소나 생성
- [대화 시스템](../04_Chat/README.md) - 채팅 기반 온보딩 진행
- [공간 시각화](../08_Spatial/README.md) - 방 애니메이션 렌더링

## 성공 지표 (KPI)
- 온보딩 완료율 > 70%
- 데이터 수집 동의율 > 80%
- 평균 온보딩 소요 시간 < 2분
- 최초 대화 시작률 > 90%
- 온보딩 중도 이탈률 < 30%

## 기술 스택
- **애니메이션**: CSS Transitions (3초 페이드인)
- **상태 관리**: TypeScript Reducer
- **영속성**: localStorage
- **타이핑 효과**: requestAnimationFrame
- **AI 생성**: Google Gemini 1.5 Pro

## 버전 이력
- **v2.0** (2025-10-27): 채팅 기반 온보딩으로 전면 개편
- **v1.0** (2025-10-27): 초기 별도 페이지 방식
