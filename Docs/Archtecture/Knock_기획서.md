# Knock - LLM 기반 생성형 인터랙션 웹 게임 기획서

## 1. 서비스 개요

- **서비스명**: Knock (노크)
- **핵심 가치**: '노크'를 통한 발견과 관계 형성. 단칸방에서 시작해 이웃을 노크하며 나만의 공간을 확장하고, AI 페르소나와 깊이 있는 대화를 나누는 경험.
- **주요 콘텐츠**: LLM 기반 AI 페르소나(룸메이트, 이웃)와의 1:1 대화.
- **핵심 루프**: 1일 1회 이웃 노크 → 새로운 방 오픈 → 새로운 AI 페르소나 발견 → 대화 및 관계 형성.

---

## 2. 핵심 기능 명세

### 2.1. 온보딩 (최초 접속)

#### 사용자 동의 획득

**기본 명세**
1. 데이터 기반 캐릭터 생성 가치 고지
2. 웹 접속 기록 수집 명시적 사전 동의(Opt-in)

**콘텐츠 강화 방안**
3. (선택) 관심/비공개 주제 1~2개 키워드 입력받아 프롬프트 필터링 및 가중치 활용

#### 최초 룸 & 룸메이트 생성

**기본 명세**
1. 수집 데이터 LLM 분석 → **룸메이트 시스템 프롬프트** 자동 생성
2. **프롬프트 구성**:
   - 성격/관심사 (데이터 기반)
   - 말투
   - 관계: '오래 함께 산 룸메이트'
3. 최초 '방' 비주얼 생성 (256x512)

**콘텐츠 강화 방안**
4. 룸메이트 핵심 키워드를 명시적으로 표시하여 AI 정체성 인지 유도

---

### 2.2. 메인 화면

#### 공간 시각화

**기본 명세**
1. 최초 접속 시 **룸메이트의 방** 1개만 중앙 표시
2. 주변 영역 블랙아웃 처리

#### 공간 확장 (핵심 훅)

**기본 명세**
1. **'이웃 노크하기'** 기능 제공 (1일 1회, 매일 00시 초기화)
2. 노크 실행 시 인접 위치에 **새로운 이웃의 방** 1개 랜덤 생성 및 오픈
3. 해당 영역 블랙아웃 해제

**콘텐츠 강화 방안**
4. **콘텐츠 다양성**: 새 이웃은 기존 AI가 커버하지 않은 새로운 관심사 기반 생성
   - 예: 룸메이트 '요리/게임' → 이웃1 '여행/철학'
   - '발견'의 재미를 극대화하는 핵심 로직

---

### 2.3. 인터랙션 (대화)

#### AI 페르소나와 대화

**기본 명세**
1. 방 블록 클릭 → 1:1 채팅 모달 실행
2. LLM API(Gemini) 기반 실시간 응답 생성

#### 강화 1: 대화 메모리 (Memory)

**기본**
- 세션 단위 휘발

**강화**
- 과거 대화에서 핵심 사실/감정 요약 기억
- **구현**: 대화 종료 시 LLM이 **핵심 요약 1줄** 생성 → DB 저장
- **효과**: "어제 본 영화 어땠어?" 등 연속성 있는 대화 가능

#### 강화 2: 관계 동적 변화 (Dynamics)

**기본**
- 시스템 프롬프트 고정

**강화**
- 상호작용(빈도, 대화 주제, 감정)에 따라 프롬프트 업데이트
- **구현**: 10회+ 긍정 대화 시 '처음 본 이웃' → '친해진 이웃', 말투 친근하게 변화
- **효과**: 관계 구축 피드백 제공

#### 강화 3: 비동기 노크 (Re-hook)

**기본**
- 사용자 먼저 말 걸어야 응답

**강화**
- AI가 먼저 노크
- **조건**:
  - ① 24시간+ 미접속 (룸메이트)
  - ② 새 이웃 방문 시 (룸메이트)
  - ③ 관련 주제 대화 시 (관련 이웃)
- **표시**: 방 블록에 '읽지 않은 메시지' 아이콘
- **효과**: 재접속 유도 훅

---

## 3. 비즈니스 모델

### 무료 플랜
- 1일 1회 이웃 노크
- 기본 LLM 모델, 5개 대화 메모리

### 유료 플랜 (Knock Plus)

#### 훅 가속
- 즉시 이웃 노크 (일 1회 제한 해제/추가 이용권)

#### 콘텐츠 강화
- **딥 다이브 대화**: 긴 메모리, 고도화 LLM, 깊은 대화
- **관계 관리**: 시스템 프롬프트 일부 직접 수정 (키워드 추가/삭제)

---

## 4. 핵심 용어 정리

- **노크(Knock)**: 이웃 방문 및 새로운 방 오픈 액션
- **룸메이트**: 사용자의 최초 AI 페르소나 (고정 관계)
- **이웃**: 노크를 통해 발견하는 새로운 AI 페르소나
- **방**: 각 AI 페르소나의 공간 (비주얼 블록)
- **시스템 프롬프트**: AI 페르소나의 성격, 관심사, 말투, 관계를 정의하는 LLM 프롬프트
